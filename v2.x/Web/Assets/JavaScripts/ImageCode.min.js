var ImageCode={_promoteText:"",_isOpen:false,set_promoteText:function(A){ImageCode._promoteText=A},init:function(){$("#a-c").click(function(){if(ImageCode._isOpen){$("#imageCode").slideUp("normal");$("#a-c").text("show counter code");ImageCode._isOpen=false}else{$("#imageCode").slideDown("normal");$("#a-c").text("hide counter code");ImageCode._isOpen=true}});$("#lnkUpdateCode").click(function(){ImageCode.generateUrl()});$("#lnkResetCode").click(function(){ImageCode.reset()});$("#txtBorderColor").ColorPicker({onBeforeShow:function(){$(this).ColorPickerSetColor(this.value)},onShow:function(A){$(A).slideDown("normal");return false},onHide:function(A){$(A).slideUp("normal");return false},onChange:function(A,C,B){$("#txtBorderColor").val(C);$("#spnBorderColor").css("backgroundColor","#"+C)},onSubmit:function(A,C,B){$("#txtBorderColor").val(C);$("#spnBorderColor").css("backgroundColor","#"+C)}}).change(function(){$("#spnBorderColor").css("backgroundColor","#"+$(this).val())});$("#txtTextBackColor").ColorPicker({onBeforeShow:function(){$(this).ColorPickerSetColor(this.value)},onShow:function(A){$(A).slideDown("normal");return false},onHide:function(A){$(A).slideUp("normal");return false},onChange:function(A,C,B){$("#txtTextBackColor").val(C);$("#spnTextBackColor").css("backgroundColor","#"+C)},onSubmit:function(A,C,B){$("#txtTextBackColor").val(C);$("#spnTextBackColor").css("backgroundColor","#"+C)}}).change(function(){$("#spnTextBackColor").css("backgroundColor","#"+$(this).val())});$("#txtTextForeColor").ColorPicker({onBeforeShow:function(){$(this).ColorPickerSetColor(this.value)},onShow:function(A){$(A).slideDown("normal");return false},onHide:function(A){$(A).slideUp("normal");return false},onChange:function(A,C,B){$("#txtTextForeColor").val(C);$("#spnTextForeColor").css("backgroundColor","#"+C)},onSubmit:function(A,C,B){$("#txtTextForeColor").val(C);$("#spnTextForeColor").css("backgroundColor","#"+C)}}).change(function(){$("#spnTextForeColor").css("backgroundColor","#"+$(this).val())});$("#txtCountBackColor").ColorPicker({onBeforeShow:function(){$(this).ColorPickerSetColor(this.value)},onShow:function(A){$(A).slideDown("normal");return false},onHide:function(A){$(A).slideUp("normal");return false},onChange:function(A,C,B){$("#txtCountBackColor").val(C);$("#spnCountBackColor").css("backgroundColor","#"+C)},onSubmit:function(A,C,B){$("#txtCountBackColor").val(C);$("#spnCountBackColor").css("backgroundColor","#"+C)}}).change(function(){$("#spnCountBackColor").css("backgroundColor","#"+$(this).val())});$("#txtCountForeColor").ColorPicker({onBeforeShow:function(){$(this).ColorPickerSetColor(this.value)},onShow:function(A){$(A).slideDown("normal");return false},onHide:function(A){$(A).slideUp("normal");return false},onChange:function(A,C,B){$("#txtCountForeColor").val(C);$("#spnCountForeColor").css("backgroundColor","#"+C)},onSubmit:function(A,C,B){$("#txtCountForeColor").val(C);$("#spnCountForeColor").css("backgroundColor","#"+C)}}).change(function(){$("#spnCountForeColor").css("backgroundColor","#"+$(this).val())});$("#txtImageCode").click(function(){$(this)[0].select()});ImageCode.reset()},reset:function(){$("#txtBorderColor").val($("#hidBorderColor").val());$("#txtTextBackColor").val($("#hidTextBackColor").val());$("#txtTextForeColor").val($("#hidTextForeColor").val());$("#txtCountBackColor").val($("#hidCountBackColor").val());$("#txtCountForeColor").val($("#hidCountForeColor").val());$("#spnBorderColor").css("backgroundColor","#"+$("#hidBorderColor").val());$("#spnTextBackColor").css("backgroundColor","#"+$("#hidTextBackColor").val());$("#spnTextForeColor").css("backgroundColor","#"+$("#hidTextForeColor").val());$("#spnCountBackColor").css("backgroundColor","#"+$("#hidCountBackColor").val());$("#spnCountForeColor").css("backgroundColor","#"+$("#hidCountForeColor").val());ImageCode.generateUrl()},generateUrl:function(){var G="";var F="";var D="";var E="";var A="";if($("#txtBorderColor").val()!=$("#hidBorderColor").val()){G=$("#txtBorderColor").val()}if($("#txtTextBackColor").val()!=$("#hidTextBackColor").val()){F=$("#txtTextBackColor").val()}if($("#txtTextForeColor").val()!=$("#hidTextForeColor").val()){D=$("#txtTextForeColor").val()}if($("#txtCountBackColor").val()!=$("#hidCountBackColor").val()){E=$("#txtCountBackColor").val()}if($("#txtCountForeColor").val()!=$("#hidCountForeColor").val()){A=$("#txtCountForeColor").val()}var C=$("#hidImageUrl").val()+"?url="+encodeURIComponent($("#hidOriginalUrl").val());if(G.length>0){C+="&borderColor="+encodeURIComponent(G)}if(F.length>0){C+="&textBackColor="+encodeURIComponent(F)}if(D.length>0){C+="&textForeColor="+encodeURIComponent(D)}if(E.length>0){C+="&countBackColor="+encodeURIComponent(E)}if(A.length>0){C+="&countForeColor="+encodeURIComponent(A)}var B='<a rev="vote-for" href="'+$("#hidKiggUrl").val()+'"><img alt="'+ImageCode._promoteText+'" src="'+C+'" style="border:0px"/></a>';$("#txtImageCode").val(B);C+="&noCache=true";$("#imgPreview").attr("src",C)},dispose:function(){$("#a-c").unbind();$("#lnkUpdateCode").unbind();$("#lnkResetCode").unbind();$("#txtBorderColor").unbind();$("#txtTextBackColor").unbind();$("#txtTextForeColor").unbind();$("#txtCountBackColor").unbind();$("#txtCountForeColor").unbind();$("#txtImageCode").unbind()}};